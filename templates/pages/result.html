{% extends 'base.html' %} 
{% load static %} 
{% load humanize %}
{% load get_user_rank %}
{% block content %}

<div class="container mt-4">
    <div class="row">
      <div class="col-lg-2 col-md-4 col-sm-6 col-12 mb-2 px-1">
        {% if rank_change > 0 %}
          <div class="card border-green px-3 py-2 shadow">
        {% else %}
          <div class="card border-blue px-3 py-2 shadow">
        {% endif %}
          <span class="text-small alt-font"
            ><i class="fas fa-trophy"></i> Overall Rank</span
          >
          <div class="alt-font text-center text-dark-gray h2">
            <span class="countup">{{ new_rank }}</span>
          </div>
          <div class="alt-font subheader subheader-small font-weight-light">
            {% if rank_change > 0 %}
              <span class="text-green"><i class="fas fa-caret-up"></i> {{ rank_change}}</span>
            {% else %}
              <span class="text-blue"><i class="fas fa-grip-lines"></i> </span>
            {% endif %}
            (Old rank: {{ old_rank }})
          </div>
        </div>
      </div>
      <div class="col-lg-2 col-md-4 col-sm-6 col-12 mb-2 px-1">
          {% if points_change > 0 %}
            <div class="card border-green px-3 py-2 shadow">
          {% else %}
            <div class="card border-blue px-3 py-2 shadow">
          {% endif %}
          <span class="text-small alt-font"
            ><i class="fas fa-star"></i> Total Points</span
          >
          <div class="alt-font text-center text-dark-gray h2">
            <span class="countup">{{ new_points }}</span>
          </div>
          <div class="alt-font subheader subheader-small font-weight-light">
            {% if points_change > 0 %}
            <span class="text-green"><i class="fas fa-caret-up"></i> {{ points_change }}</span>
            {% else %}
              <span class="text-blue"><i class="fas fa-grip-lines"></i> </span>
            {% endif %}
            
            (Previously {{ old_points }})
          </div>
        </div>
      </div>
      <div class="col-lg-2 col-md-4 col-sm-6 col-12 mb-2 px-1">
        {% if coins_change > 0 %}
          <div class="card border-green px-3 py-2 shadow">
        {% elif coins_change == 0 %}
          <div class="card border-blue px-3 py-2 shadow">
        {% else %}
          <div class="card border-danger px-3 py-2 shadow">
        {% endif %}
        
          <span class="text-small alt-font"
            ><i class="fas fa-coins"></i> Coins Remaining</span
          >
          <div class="alt-font text-center text-dark-gray h2">
            <span class="countup">{{ new_coins }}</span>
          </div>
          <div class="alt-font subheader subheader-small font-weight-light">
              {% if coins_change > 0 %}
                <span class="text-green"><i class="fas fa-caret-up"></i> {{ coins_change }}</span>
              {% elif coins_change == 0 %}
                <span class="text-blue"><i class="fas fa-grip-lines"></i> </span>
              {% else %}
                <span class="text-danger"
                  ><i class="fas fa-caret-down"></i> {{ coins_change }}</span
                >
              {% endif %}
            (Previously {{ old_coins }})
          </div>
        </div>
      </div>
      <div class="col-lg-2 col-md-4 col-sm-6 col-12 mb-2 px-1">
        <div class="card border-blue px-3 py-2 shadow">
          <span class="text-small alt-font"
            ><i class="fas fa-user"></i> Total Users</span
          >
          <div class="alt-font text-center text-dark-gray h2">
            <span class="countup">{{ total_users }}</span>
          </div>
          <div class="alt-font subheader subheader-small font-weight-light">
            Your Rank: {{ rank }}
          </div>
        </div>
      </div>
      <div class="col-lg-2 col-md-4 col-sm-6 col-12 mb-2 px-1">
        {% if grade_compare > 0 %}
          <div class="card border-green px-3 py-2 shadow">
        {% elif grade_compare == 0 %}
          <div class="card border-blue px-3 py-2 shadow">
        {% else %}
          <div class="card border-danger px-3 py-2 shadow">
        {% endif %}
        
          <span class="text-small alt-font"
            ><i class="fas fa-star"></i> Average Grade</span
          >
          <div class="alt-font text-center text-dark-gray h2">
            <span class="countup">{{ average_points }}</span>
          </div>
          <div class="alt-font subheader subheader-small font-weight-light">
            {% if grade_compare > 0 %}
              <span class="text-green"
                ><i class="fas fa-caret-down"></i> {{ grade_compare }}%</span
              >  Above Average
            {% elif grade_compare == 0 %}
              <span class="text-blue"
                ><i class="fas fa-grip-lines"></i></span
              > Average grade
            {% else %}
              <span class="text-danger"
                ><i class="fas fa-caret-down"></i> {{ grade_compare }}%</span
              >  Below Average
            {% endif %}
            
           
          </div>
        </div>
      </div>
      <div class="col-lg-2 col-md-4 col-sm-6 col-12 mb-2 px-1">
          {% if minutes_compare > 0 %}
            <div class="card border-green px-3 py-2 shadow">
          {% elif minutes_compare == 0 %}
            <div class="card border-blue px-3 py-2 shadow">
          {% else %}
            <div class="card border-danger px-3 py-2 shadow">
          {% endif %}
          <span class="text-small alt-font"
            ><i class="fas fa-clock"></i> Average Time Taken</span
          >
          <div class="alt-font text-center text-dark-gray h2">
            <span class="">{{ average_minutes_taken }}</span> min
          </div>
          <div class="alt-font subheader subheader-small font-weight-light">
            {% if minutes_compare > 0 %}
              <span class="text-green"
                ><i class="fas fa-caret-up"></i> {{ minutes_compare }}%</span
              >  Above Average
            {% elif minutes_compare == 0 %}
              <span class="text-blue"
                ><i class="fas fa-grip-lines"></i></span
              > Exact Average
            {% else %}
              <span class="text-danger"
                ><i class="fas fa-caret-up"></i> {{ minutes_compare }}%</span
              >  Below Average
            {% endif %}
            
           
          </div>
        </div>
      </div>
    </div>

    <div class="row py-4">
      <div class="col-lg-8 mb-3">
        <div
          class="bg-lightblue rounded text-dark-gray px-2 py-4 alt-font text-uppercase "
        >
          <div class="container-fluid">
            <div class="row">
              <div class="col-xl-4 col-lg-12 col-md-4">
                <div class="text-center subheader font-weight-light">
                  Kathy Smith
                  <div class=" py-2 text-capitalize text-small">
                    <div class="text-dark"><i class="fas fa-percent"></i> <span class="text-lowercase"> a</span>ge: <span class="text-green">70</span> </div>
                    <div class="text-dark">Time taken: <span class="text-danger"> 102 sec</span></div>
                  </div>
                </div>
              </div>
              <div class="col-xl-4 col-lg-12 col-md-4">
                <div class="display-4 text-center">
                  <span class="text-green"> 70 </span>:
                  <span class="text-danger"> 40</span>
                </div>
              </div>
              <div class="col-xl-4 col-lg-12 col-md-4">
                <div class="text-center subheader font-weight-light">
                  John Doe
                  <div class=" py-2 text-capitalize text-small">
                    <div class="text-dark"><i class="fas fa-percent"></i> <span class="text-lowercase"> a</span>ge: <span class="text-danger">40</span> </div>
                    <div class="text-dark">Time taken: <span class="text-green"> 90 sec</span></div>
                  </div>
                </div>
              </div>
            </div>
          </div>
          
          
          
        </div>
        <div class="bg-lightblue mt-3">
          <div class="bg-dark text-light px-3 py-1 alt-font">
            Challenge Rewards
          </div>
          <div class="px-3 py-2 alt-font d-flex justify-content-between text-extra-dark-gray">
            <div>Pts Earned: 7</div>
            <div><i class="fas fa-coins text-coin"></i> +14</div>
          </div>
          <div class="bg-dark text-light px-3 py-1 alt-font d-flex">
            <div class="mr-auto">Level 4</div>
            <div class="">Challenges Remaining: 3/5</div>
          </div>
          <div class="px-2 py-3">
            <div class="progress bg-dark subheader" style="height: 5rem;">
              <div
                class="progress-bar bg-deep-pink content-relative"
                style="width: 26.66%;"
              >
                Level 3
                <div class="background" style="width: 100%;"></div>
              </div>
              <div
                class="progress-bar bg-blue content-relative"
                style="width: 33.33%"
              >
                Level 4
                <div class="background" style="width: 40%;"></div>
              </div>
              <div class="progress-bar bg-green" style="width: 40%">
                Level 5
              </div>
            </div>
            <div class="container-fluid">
              <div class="row">
                <div class="col-3"></div>
                <div class="col-4 px-0">4 pts</div>
                <div class="col px-0">9 pts</div>
              </div>
            </div>
          </div>
        </div>

        <div class="d-flex my-3">
          <a href="" class="btn btn-outline-dark px-4 py-2"><i class="fas fa-angle-double-left"></i> Home</a>
          <a href="" class="btn btn-outline-dark px-4 py-2 ml-auto">Continue <i class="fas fa-angle-double-right"></i></a>
        </div>
      </div>
      <div class="col-lg-4 border px-0">
        <div
          class="alt-font text-center subheader pb-3 border-bottom-pink pt-3 bg-lightblue"
        >
          Top Performers
        </div>

        <table
          class="table table-striped-lightblue table-borderless subheader subheader-small text-dark-gray mt-3"
        >
          {% if all_users.0 %}
          <tr>
            <td class="px-3">
              <a href="" class="text-dark">{{ all_users.0.user }}</a>
              <span class="mx-2 font-weight-light"
                >( <i class="fas fa-trophy text-blue"></i> Overall Rank:
                {{ all_users.0 | get_user_rank:all_users.0.user }})</span
              >
              <div class="font-weight-light pt-1">
                <span class="mx-2">Grade: {{ all_users.0.grade }}</span>
                <span class="mx-2">Time taken: {{ all_users.0.minutes_taken }} min</span>
                <span class="mx-2">Level: 5</span>
              </div>
            </td>
          </tr>
          {% endif %}
          {% if all_users.1 %}
          <tr>
            <td class="px-3">
              <a href="" class="text-dark">{{ all_users.1.user }}</a>
              <span class="mx-2 font-weight-light"
                >( <i class="fas fa-trophy text-blue"></i> Overall Rank:
                {{ all_users.1 | get_user_rank:all_users.1.user }})</span
              >
              <div class="font-weight-light pt-1">
                <span class="mx-2">Grade: {{ all_users.1.grade }}</span>
                <span class="mx-2">Time taken: {{ all_users.1.minutes_taken }} min</span>
                <span class="mx-2">Level: 5</span>
              </div>
            </td>
          </tr>
          {% endif %}
          {% if all_users.2 %}
          <tr>
            <td class="px-3">
              <a href="" class="text-dark">{{ all_users.2.user }}</a>
              <span class="mx-2 font-weight-light"
                >( <i class="fas fa-trophy text-blue"></i> Overall Rank:
                {{ all_users.2 | get_user_rank:all_users.2.user }})</span
              >
              <div class="font-weight-light pt-1">
                <span class="mx-2">Grade: {{ all_users.2.grade }}</span>
                <span class="mx-2">Time taken: {{ all_users.2.minutes_taken }} min</span>
                <span class="mx-2">Level: 5</span>
              </div>
            </td>
          </tr>
          {% endif %}
          {% if all_users.3 %}
          <tr>
            <td class="px-3">
              <a href="" class="text-dark">{{ all_users.3.user }}</a>
              <span class="mx-2 font-weight-light"
                >( <i class="fas fa-trophy text-blue"></i> Overall Rank:
                {{ all_users.3 | get_user_rank:all_users.3.user }})</span
              >
              <div class="font-weight-light pt-1">
                <span class="mx-2">Grade: {{ all_users.3.grade }}</span>
                <span class="mx-2">Time taken: {{ all_users.3.minutes_taken }} min</span>
                <span class="mx-2">Level: 5</span>
              </div>
            </td>
          </tr>
          {% endif %}
          {% if all_users.4 %}
          <tr>
            <td class="px-3">
              <a href="" class="text-dark">{{ all_users.4.user }}</a>
              <span class="mx-2 font-weight-light"
                >( <i class="fas fa-trophy text-blue"></i> Overall Rank:
                {{ all_users.4 | get_user_rank:all_users.4.user }})</span
              >
              <div class="font-weight-light pt-1">
                <span class="mx-2">Grade: {{ all_users.4.grade }}</span>
                <span class="mx-2">Time taken: {{ all_users.4.minutes_taken }} min</span>
                <span class="mx-2">Level: 5</span>
              </div>
            </td>
          </tr>
          {% endif %}
        </table>
      </div>
    </div>
  </div>

{% endblock %}
